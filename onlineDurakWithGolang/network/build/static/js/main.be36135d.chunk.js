(window.webpackJsonpdurak_frontend=window.webpackJsonpdurak_frontend||[]).push([[0],{14:function(e,t,n){},21:function(e,t,n){e.exports=n(35)},26:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(20),o=n.n(i),s=(n(26),n(5)),r=n(6),l=n(9),h=n(7),u=n(1),d=n(8),k=(n(14),n(3)),p=n.n(k),f={Suit:{0:"Spade",1:"Diamond",2:"Club",3:"Heart",100:"Hidden"},Rank:{6:"Six",7:"Seven",8:"Eight",9:"Nine",10:"Ten",11:"Jack",12:"Queen",13:"King",14:"Ace",100:"Hidden"}},b=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=!!this.props.chosenCard&&(this.props.chosenCard.Suit===this.props.Suit&&this.props.chosenCard.Rank===this.props.Rank);return c.a.createElement(p.a,{border:"secondary",bg:t?"info":"",text:t?"white":"",onClick:function(){return e.props.clicked({Suit:e.props.Suit,Rank:e.props.Rank})}},c.a.createElement(p.a.Header,null,f.Suit[this.props.Suit]),c.a.createElement(p.a.Body,null,c.a.createElement(p.a.Title,null,f.Rank[this.props.Rank])),c.a.createElement(p.a.Footer,null," ",f.Suit[this.props.Suit]," "))}}]),t}(a.Component),g=n(13),m=n.n(g),O=n(15),E=n.n(O),v=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).clicked=n.clicked.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"clicked",value:function(e){this.props.action(e)}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.cards.length;t++)e.push(c.a.createElement(E.a,{key:t,md:"auto"},c.a.createElement(b,{Suit:this.props.cards[t].Suit,Rank:this.props.cards[t].Rank,clicked:this.clicked,chosenCard:this.props.chosenCard}," ")));return c.a.createElement(m.a,null,e)}}]),t}(a.Component),S=n(16),y=n.n(S),j=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){for(var e=[],t=[],n=0;n<this.props.beaten.length;n++)e.push(c.a.createElement(b,{key:n+40,Suit:this.props.beaten[n].Suit,Rank:this.props.beaten[n].Rank,clicked:function(){}}," "));for(n=0;n<this.props.notBeaten.length;n++)t.push(c.a.createElement(b,{key:n+20,Suit:this.props.notBeaten[n].Suit,Rank:this.props.notBeaten[n].Rank,clicked:this.props.action}," "));return c.a.createElement(y.a,{style:{height:"90%"}},c.a.createElement("div",null,"Not Beaten cards"),c.a.createElement(m.a,{style:{height:"50%",borderStyle:"groove"}},t),c.a.createElement("div",null,"Beaten cards"),c.a.createElement(m.a,{style:{height:"50%",borderStyle:"groove"}},e))}}]),t}(a.Component),C=n(17),B=n.n(C),w=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).attackOptions=n.attackOptions.bind(Object(u.a)(n)),n.defenceOptions=n.defenceOptions.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"attackOptions",value:function(){return this.props.canBeDoneWithAttack?c.a.createElement(B.a,{variant:"success",size:"lg",block:!0,onClick:this.props.buttonPress},"Finish attack"):c.a.createElement(B.a,{variant:"success",size:"lg",block:!0,disabled:!0,onClick:this.props.buttonPress},"Finish attack")}},{key:"defenceOptions",value:function(){return c.a.createElement(B.a,{variant:"warning",size:"lg",block:!0,onClick:this.props.buttonPress}," Take cards")}},{key:"render",value:function(){return c.a.createElement(y.a,null,c.a.createElement(m.a,{className:"justify-content-md-center"},c.a.createElement(E.a,{sm:4},this.props.attack?this.attackOptions():this.defenceOptions())))}}]),t}(a.Component),D=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={nonBeaten:[],beaten:[],hand:[],attacking:null,options:[],defenceChoices:[],cardForDefence:{},socket:null,kozir:null,finished:!1},n.controller=n.controller.bind(Object(u.a)(n)),n.attack=n.attack.bind(Object(u.a)(n)),n.defend=n.defend.bind(Object(u.a)(n)),n.pickCardForDefence=n.pickCardForDefence.bind(Object(u.a)(n)),n.finishOrTake=n.finishOrTake.bind(Object(u.a)(n)),n}return Object(d.a)(t,e),Object(r.a)(t,[{key:"controller",value:function(e,t){try{var n=JSON.parse(t.data)}catch(c){return void console.log(c)}switch(console.log("EVENT: ",n),Object.keys(n)[0]){case"attack":e.setState({hand:n.attack.deck,attacking:!0,nonBeaten:n.attack.nonBeaten,beaten:n.attack.beaten,kozir:n.attack.kozir[0].Suit});break;case"defence":e.setState({hand:n.defence.deck,attacking:!1,nonBeaten:n.defence.nonBeaten,beaten:n.defence.beaten,cardForDefence:null,kozir:n.defence.kozir[0].Suit});break;case"options":e.setState({options:n.options,cardForDefence:null});break;case"defenceChoices":e.setState({defenceChoices:n.defenceChoices});break;case"message":var a=n.message;"Broke connection"===a?console.log("Other player broke connection!"):"Done!"===a?e.setState({finished:!0,attacking:null}):console.log("RECEIVED MESSAGE ",a);break;default:console.log("UNKONWN MESSAGE",t.data)}}},{key:"componentDidMount",value:function(){var e=this,t=new WebSocket("ws://localhost:8080/api");console.log("Launched!"),this.setState({socket:t}),t.onmessage=function(t){return e.controller(e,t)}}},{key:"getCardId",value:function(e,t){for(var n=0;n<e.length;n++)if(e[n].Suit===t.Suit&&e[n].Rank===t.Rank)return n;return-10}},{key:"attack",value:function(e){console.log("attack with",e);var t=this.getCardId(this.state.hand,e);console.log("Card id: ",t),-10!==t&&this.state.socket.send(t.toString())}},{key:"defend",value:function(e){console.log("defend with",e);var t=this.getCardId(this.state.nonBeaten,e);-10!=t&&this.state.socket.send(t.toString())}},{key:"pickCardForDefence",value:function(e){console.log("picked for defence, ",e);var t=this.getCardId(this.state.hand,e);console.log(this.state),-10===t||null!=this.state.cardForDefence&&0!=this.state.defenceChoices.length||(this.setState({cardForDefence:e}),this.state.socket.send(t.toString()))}},{key:"finishOrTake",value:function(){console.log("Finish or take"),this.state.socket.send("1000")}},{key:"render",value:function(){var e,t=f.Suit[this.state.kozir];return e=this.state.finished?0===this.state.hand.length?c.a.createElement("h2",null,"You won!"):c.a.createElement("h2",null,"You lost!"):this.state.attacking?c.a.createElement("h2",null,"You are the attacker. Kozir suit: ",t," "):null!==this.state.attacking?c.a.createElement("h2",null,"You are the defender. Kozir suit: ",t," "):c.a.createElement("h2",null,"Waiting for another player to join"),c.a.createElement("div",{className:"App"},c.a.createElement(p.a,null,c.a.createElement(p.a.Header,{style:{height:"15%"}},e,null===this.state.attacking?null:c.a.createElement(w,{attack:this.state.attacking,buttonPress:this.finishOrTake,canBeDoneWithAttack:this.state.nonBeaten.length+this.state.beaten.length!==0&&0===this.state.nonBeaten.length},"  ")),c.a.createElement(p.a.Body,null,c.a.createElement(j,{beaten:this.state.beaten,notBeaten:this.state.nonBeaten,action:null!==this.state.cardForDefence?this.defend:function(){},defenceOptions:this.state.defenceChoices}," ")),c.a.createElement(p.a.Footer,{style:{height:"25%"}},c.a.createElement(v,{cards:this.state.hand,action:this.state.attacking?this.attack:this.pickCardForDefence,attacking:this.state.attacking,chosenCard:this.state.cardForDefence}," "))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,1,2]]]);
//# sourceMappingURL=main.be36135d.chunk.js.map